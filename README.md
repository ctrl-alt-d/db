# Assignatura Bases de Dades

```
0484. Bases de dades
Durada: 198 hores
Hores a realitzar en el centre educatiu: 132 hores
Hores d’estada a l’empresa: 66 hores
Equivalència en crèdits ECTS: 12
```

## Activitats d'ensenyament aprenentatge (Temes)

* Tema 1. [Introducció a les bases de dades](./Tema_1/readme.md) (RA1)
* Tema 2. [Bases de dades relacionals](./Tema_2/readme.md)
  * Tema 2.1. [DDL I - Data Definition Language](./Tema_2/Tema_2_1/readme.md)
    * Tema 2.1.1. [Creació de taules](./Tema_2/Tema_2_1/Tema_2_1_1/readme.md) (RA2)
    * Tema 2.1.2. [Modificació i eliminació de taules](./Tema_2/Tema_2_1_2/readme.md) (RA2)
  * Tema 2.2. DML - [Data Manipulation Language](./Tema_2/Tema_2_2/readme.md)
    * [Tema 2.2.1. Insercions](./Tema_2/Tema_2_2/Tema_2_2_1/readme.md) (RA4)
    * [Tema 2.2.2. Consultes](./Tema_2/Tema_2_2/Tema_2_2_2/readme.md) (RA3)
    * [Tema 2.2.2bis. Pràctiques de Consultes](./Tema_2/Tema_2_2/Tema_2_2_2bis/readme.md) (RA3)
    * [Tema 2.2.3. Actualitzacions](./Tema_2/Tema_2_2/Tema_2_2_3/readme.md) (RA4)
    * [Tema 2.2.4. Esborrats](./Tema_2/Tema_2_2/Tema_2_2_4/readme.md) (RA4)
  * [Tema 2.3. Transaccions](./Tema_2/Tema_2_3/readme.md) (RA4)
  * [Tema 2.4. Procediments emmagatzemats](./Tema_2/Tema_2_4/) (RA5)
  * Tema 2.5. DDL II - [Data Definition Language](./Tema_2/Tema_2_5/readme.md)
    * [Tema 2.5.1. Índexs](./Tema_2/Tema_2_5/indexos.md) (RA2)
    * [Tema 2.5.2. Vistes](./Tema_2/Tema_2_5/vistes.md) (RA2)
    * [Tema 2.5.3. Usuaris i privilegis](./Tema_2/Tema_2_5/permisos.md) (RA2)
  * [Tema 2.4 + Tema 2.5](./Tema_2_54/exercici.md)
* Tema 3. Disseny de bases de dades
  * Tema 3.1. PDM - Model físic de dades (RA6)
  * Tema 3.2. M/ER - Model entitat/relació (RA6)
  * Tema 3.3. Normalització de models relacionals (RA6)
* Tema 4. Bases de dades no relacionals (RA7) 

Nota:

```math
QM = 0.8 \cdot (0.1 \cdot RA_1 +  0.2 \cdot RA_2 + 0.2 \cdot RA_3 + 0.2 \cdot RA_4 + 0.2 \cdot RA_5 + 0.1 \cdot RA_6) + 0.1 \cdot CC + 0.1 \cdot EE
```

> [!CAUTION]
> Seguint les instruccions **del PCC Ins Cendrassos**, les `capacitats clau` **no** s'avaluen dins els `RAs (resultats d'aprenentatge)`, sino que s'avaluen de manera independent i la seva nota se suma a la nota ponderada de les `RAs` amb un pes d'un 10% del total de la nota del `mòdul professional`. Llegir la `guia de l'estudiant` per més detalls. Això està en fase de canvi però encara no està actualitzat el PCC, un cop s'actualitzi, aquí es publicarà el nou criteri d'avaluació.

### Alumnes compleció

* [Examen](./Complesio/examen.7z): Dia 20 de novembre de 2025 de 15:00h a 17:00h
* [Treball de compleció](./Complesio/enunciat_ca.md) Entrega màxima dia 3 de novembre de 2025 a les 13:00h

Notes:

* Per poder fer l'examen cal haver entregat i supererat el treball de compleció.
* La nota serà 80% examen i 20% treball de compleció.
* Per superar l'assignatura caldrà obtenir un mínim de 5 punts en l'examen i una nota final mínima de 5 punts.
* El treball de compleció ha d'estar sencer. No es puntuarà parcialment.
* El treball de compleció s'ha de poder defensar oralment. Es faran preguntes orals el dia de l'examen.

### Temporalització

Temporalització orientativa de l'assignatura:

| Codi  | Nom del tema                                | Temporalització           |
|-------|---------------------------------------------|---------------------------|
| 1     | Introducció a les bases de dades (RA1)      | 15 setembre - 26 setembre |
| 2.1.1 | Creació de taules (RA2)                     | 29 setembre - 16 octubre  |
| 2.1.2 | Modificació i eliminació de taules (RA2)    | 17 octubre - 17 octubre   |
| 2.2.1 | Insercions (RA4)                            | 20 octubre - 23 octubre   |
| 2.2.2 | Consultes (RA3)                             | 24 octubre - 28 novembre  |
| 2.2.3 | Actualitzacions (RA4)                       | 1 desembre - 4 desembre   |
| 2.2.4 | Esborrats (RA4)                             | 5 desembre - 11 desembre  |
| 2.3   | Transaccions (RA4)                          | 12 desembre - 9 gener     |
| 2.4   | Procediments emmagatzemats (RA5)            | 12 gener - 30 gener       |
| 2.5.1 | Índexs (RA2)                                | 2 febrer - 5 febrer       |
| 2.5.2 | Vistes (RA2)                                | 6 febrer - 6 febrer       |
| 2.5.3 | Usuaris i privilegis (RA2)                  | 9 febrer - 12 febrer      |
| 3.1   | PDM - Model físic de dades (RA6)            | 13 febrer - 20 febrer     |
| 3.2   | M/ER - Model entitat/relació (RA6)          | 23 febrer - 6 març        |
| 3.3   | Normalització de models relacionals (RA6)   | 9 març - 13 març          |
| 4     | Bases de dades no relacionals (RA7)         | 16 març - 27 març         |


### Relació amb els continguts

| Codi  | Nom del tema                              | Continguts                       |
|-------|-------------------------------------------|----------------------------------|
| 1     | Introducció a les bases de dades (RA1)    | 1.1, 1.2, 1.3, 1.4, 1.5, 1.6     |
| 2.1.1 | Creació de taules (RA2)                   | 2.1, 2.2, 2.3, 2.4, 2.5, 2.7, 2.8, 2.11 |
| 2.1.2 | Modificació i eliminació de taules (RA2)  | 2.3, 2.5, 2.7, 2.11              |
| 2.2.1 | Insercions (RA4)                          | 4.1, 4.2                         |
| 2.2.2 | Consultes (RA3)                           | 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9 |
| 2.2.3 | Actualitzacions (RA4)                     | 4.1, 4.3                         |
| 2.2.4 | Esborrats (RA4)                           | 4.1                              |
| 2.3   | Transaccions (RA4)                        | 4.4, 4.5                         |
| 2.4   | Procediments emmagatzemats (RA5)          | 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8 |
| 2.5.1 | Índexs (RA2)                              | 2.6                              |
| 2.5.2 | Vistes (RA2)                              | 2.9                              |
| 2.5.3 | Usuaris i privilegis (RA2)                | 2.10, 2.12                       |
| 3.1   | PDM - Model físic de dades (RA6)          | 6.3                              |
| 3.2   | M/ER - Model entitat/relació (RA6)        | 6.1, 6.2                         |
| 3.3   | Normalització de models relacionals (RA6) | 6.4, 6.5                         |
| 4     | Bases de dades no relacionals (RA7)       | 7.1, 7.2, 7.3, 7.4, 7.5          |



## Entorns per a fer pràctiques

Entorns per a fer pràctiques d'sql, sistemes gestors de base de dades sense dades i d'altres amb base de dades d'exemple.

### Entorn Azure SQL Edge

**Azure SQL Edge** és una versió optimitzada del motor de bases de dades de SQL Server, dissenyada per a dispositius IoT i edge computing. Utilitza el mateix motor que SQL Server, per tant la sintaxi T-SQL és pràcticament idèntica.

> **Per què Azure SQL Edge i no SQL Server?**  
> SQL Server només està disponible per a arquitectures x64 (Intel/AMD). Azure SQL Edge, en canvi, també funciona en arquitectures ARM64, com els Mac amb processadors Apple Silicon (M1, M2, M3...). Això ens permet treballar amb T-SQL en qualsevol equip.

Per treballar amb bases de dades relacionals, inicialment, farem servir Azure SQL Edge dins docker i DBeaver com a client.

Un cop instal·lat Docker, podem baixar la imatge de Azure SQL Edge i crear un contenidor amb les següents comandes:

```bash
docker run --cap-add SYS_PTRACE -e 'ACCEPT_EULA=1' -e 'MSSQL_SA_PASSWORD=yourStrong(!)Password' -p 1433:1433 --name sql1 -d mcr.microsoft.com/azure-sql-edge
```

Què significa cada paràmetre?
- `-e "ACCEPT_EULA=Y"`: Accepta l'acord de llicència.
- `-e "MSSQL_SA_PASSWORD=yourStrong(!)Password"`: Defineix la contrasenya per l'usuari `sa`.
- `-p 1433:1433`: Mapeja el port 1433 del contenidor al port 1433 de la màquina host.
- `--name sql1`: Assigna el nom `sql1` al contenidor.
- `-d`: Executa el contenidor en mode desatès (background).
- `mcr.microsoft.com/mssql/server:2022-latest`: Especifica la imatge de  a utilitzar.

Un cop el contenidor està en funcionament, podem connectar-nos-hi utilitzant DBeaver.

Comprova que s'ha engegat correctament amb la comanda, si no és així, repassa els logs.

Comandes útils per gestionar el contenidor:
- `docker ps`: Llista els contenidors en execució.
- `docker stop sql1`: Atura el contenidor anomenat `sql1`.
- `docker start sql1`: Inicia el contenidor anomenat `sql1`.
- `docker logs sql1`: Mostra els logs del contenidor `sql1`.

#### Connexió amb DBeaver

Per connectar-te a Azure SQL Edge des de DBeaver:
1. Crea una nova connexió seleccionant **SQL Server**.
2. Introdueix les dades de connexió:
   - **Host**: `localhost`
   - **Port**: `1433`
   - **Database**: `master` (base de dades per defecte)
   - **Username**: `sa`
   - **Password**: `yourStrong(!)Password`
3. Prova la connexió i guarda-la.

#### Creació de la base de dades

Un cop connectats amb DBeaver, podem crear una nova base de dades usant l'entorn gràfic o amb SQL:

```sql
CREATE DATABASE nom_base_dades;
```

Repeteix la pràctica d'introducció a SQL, però aquesta vegada utilitzant Azure SQL Edge. Pots trobar la pràctica [aquí](../Tema_1/Contingut/creant-una-base-de-dades-a-supabase.md)

### Entorn Postgres

Per treballar amb PostgreSQL, farem servir un contenidor Docker i DBeaver com a client.

Un cop instal·lat Docker, podem baixar la imatge de PostgreSQL i crear un contenidor amb la següent comanda:

```bash
docker run --name postgres1 -e POSTGRES_PASSWORD=yourStrong_Password -p 5432:5432 -d postgres:latest
```

Què significa cada paràmetre?
- `-e "POSTGRES_PASSWORD=yourStrong_Password"`: Defineix la contrasenya per l'usuari `postgres` (usuari administrador per defecte).
- `-p 5432:5432`: Mapeja el port 5432 del contenidor al port 5432 de la màquina host.
- `--name postgres1`: Assigna el nom `postgres1` al contenidor.
- `-d`: Executa el contenidor en mode desatès (background).
- `postgres:latest`: Especifica la imatge de PostgreSQL a utilitzar.

Un cop el contenidor està en funcionament, podem connectar-nos-hi utilitzant DBeaver.

Comprova que s'ha engegat correctament amb la comanda `docker ps`, si no és així, repassa els logs.

Comandes útils per gestionar el contenidor:
- `docker ps`: Llista els contenidors en execució.
- `docker stop postgres1`: Atura el contenidor anomenat `postgres1`.
- `docker start postgres1`: Inicia el contenidor anomenat `postgres1`.
- `docker logs postgres1`: Mostra els logs del contenidor `postgres1`.

#### Connexió amb DBeaver

Per connectar-te a PostgreSQL des de DBeaver:
1. Crea una nova connexió seleccionant **PostgreSQL**.
2. Introdueix les dades de connexió:
   - **Host**: `localhost`
   - **Port**: `5432`
   - **Database**: `postgres` (base de dades per defecte)
   - **Username**: `postgres`
   - **Password**: `yourStrong_Password`
3. Prova la connexió i guarda-la.

#### Creació de la base de dades

Un cop connectats amb DBeaver, podem crear una nova base de dades usant l'entorn gràfic o amb SQL:

```sql
CREATE DATABASE nom_base_dades;
```

Repeteix la pràctica d'introducció a SQL, però aquesta vegada utilitzant PostgreSQL. Pots trobar la pràctica [aquí](../Tema_1/Contingut/creant-una-base-de-dades-a-supabase.md)

### SGBD amb bases de dades d'exemple:

* https://github.com/ctrl-alt-d/AwesomeSampleDatabases


## Resultats d'aprenentatge i criteris d'avaluació

### Resultats d'aprenentatge

1. RA1) Reconeix els elements de les bases de dades analitzant-ne les funcions i valorant la utilitat dels sistemes gestors.
2. RA2) Crea bases de dades definint-ne l'estructura i les característiques dels elements segons el model relacional.
3. RA3) Consulta la informació emmagatzemada en una base de dades fent servir assistents, eines gràfiques i el llenguatge de manipulació de dades.
4. RA4) Modifica la informació emmagatzemada a la base de dades utilitzant assistents, eines gràfiques i el llenguatge de manipulació de dades.
5. RA5) Desenvolupa procediments emmagatzemats avaluant i utilitzant les sentències del llenguatge incorporat al sistema gestor de bases de dades.
6. RA6) Dissenya models relacionals normalitzats interpretant diagrames entitat/relació.
7. RA7) Gestiona la informació emmagatzemada en bases de dades no relacionals, avaluant i utilitzant les possibilitats que proporciona el sistema gestor.

### Criteris d'avaluació de cada resultat d'aprenentatge

1. Reconeix els elements de les bases de dades analitzant-ne les funcions i valorant la utilitat dels sistemes gestors.
   **Criteris d'avaluació**:
   * 1.1 Analitza els sistemes lògics d'emmagatzematge i característiques.
   * 1.2 Identifica els diferents tipus de bases de dades segons el model de dades emprat.
   * 1.3 Identifica els diferents tipus de bases de dades segons la ubicació de la informació.
   * 1.4 Avalua la utilitat d'un sistema gestor de bases de dades.
   * 1.5 Reconeix la funció de cadascun dels elements d'un sistema gestor de bases de dades.
   * 1.6 Classifica els sistemes gestors de bases de dades.
   * 1.7 Reconeix la utilitat de les bases de dades distribuïdes.
   * 1.8 Analitza les polítiques de fragmentació de la informació.
   * 1.9 Identifica la legislació vigent sobre protecció de dades.
   * 1.10 Reconeix els conceptes de Big Data i de la intel·ligència de negocis.

2. Crea bases de dades definint-ne l'estructura i les característiques dels elements segons el model relacional.
   **Criteris d'avaluació**:
   * 2.1 Analitza el format d'emmagatzematge de la informació.
   * 2.2 Crea les taules i les relacions entre elles.
   * 2.3 Selecciona els tipus de dades adequades.
   * 2.4 Defineix els camps clau a les taules.
   * 2.5 Implanta les restriccions reflectides al disseny lògic.
   * 2.6 Crea vistes.
   * 2.7 Crea els usuaris i els assigna privilegis.
   * 2.8 Utilitza assistents, eines gràfiques i els llenguatges de definició i control de dades.

3. Consulta la informació emmagatzemada en una base de dades fent servir assistents, eines gràfiques i el llenguatge de manipulació de dades.
   **Criteris d'avaluació**:
   * 3.1 Identifica les eines i sentències per fer consultes.
   * 3.2 Fa consultes simples sobre una taula.
   * 3.3 Fa consultes sobre el contingut de diverses taules mitjançant composicions internes.
   * 3.4 Fa consultes sobre el contingut de diverses taules mitjançant composicions externes.
   * 3.5 Fa consultes resum.
   * 3.6 Fa consultes amb subconsultes.
   * 3.7 Fa consultes que impliquen múltiples seleccions.
   * 3.8 Aplica criteris d'optimització de consultes.

4. Modifica la informació emmagatzemada a la base de dades utilitzant assistents, eines gràfiques i el llenguatge de manipulació de dades.
   **Criteris d'avaluació**:
   * 4.1 Identifica les eines i sentències per modificar el contingut de la base de dades.
   * 4.2 Insereix, esborra i actualitza dades a les taules.
   * 4.3 Inclou en una taula la informació resultant de l'execució d'una consulta.
   * 4.4 Dissenya guions de sentències per dur a terme tasques complexes.
   * 4.5 Reconeix el funcionament de les transaccions.
   * 4.6 Anul·la parcialment o totalment els canvis produïts per una transacció.
   * 4.7 Identifica els efectes de les diferents polítiques de bloqueig de registres.
   * 4.8 Adopta mesures per mantenir la integritat i la consistència de la informació.

5. Desenvolupa procediments emmagatzemats avaluant i utilitzant les sentències del llenguatge incorporat al sistema gestor de bases de dades.
   **Criteris d'avaluació**:
   * 5.1 Identifica les diverses maneres d'automatitzar tasques.
   * 5.2 Reconeix els mètodes d'execució de guions.
   * 5.3 Identifica les eines disponibles per editar guions.
   * 5.4 Defineix i utilitza guions per automatitzar tasques.
   * 5.5 Utilitza les funcions proporcionades pel sistema gestor.
   * 5.6 Defineix procediments i funcions d'usuari.
   * 5.7 Utilitza estructures de control de flux.
   * 5.8 Defineix esdeveniments i disparadors.
   * 5.9 Utilitza cursors.
   * 5.10 Utilitza excepcions.

6. Dissenya models relacionals normalitzats interpretant diagrames entitat/relació.
   **Criteris d'avaluació**:
   * 6.1 Utilitza eines gràfiques per representar el disseny lògic.
   * 6.2 Utilitza les taules del disseny lògic.
   * 6.3 Utilitza els camps que formen part de les taules del disseny lògic.
   * 6.4 Analitza les relacions entre les taules del disseny lògic.
   * 6.5 Utilitza els camps clau.
   * 6.6 Aplica regles d'integritat.
   * 6.7 Aplica regles de normalització.
   * 6.8 Analitza i documenta les restriccions que no es poden plasmar en el disseny lògic.

7. Gestiona la informació emmagatzemada en bases de dades no relacionals, avaluant i utilitzant les possibilitats que proporciona el sistema gestor.
   **Criteris d'avaluació**:
   * 7.1 Descriu les característiques de les bases de dades no relacionals.
   * 7.2 Avalua els tipus principals de bases de dades no relacionals.
   * 7.3 Identifica els elements utilitzats en aquestes bases de dades.
   * 7.4 Identifica diverses formes de gestió de la informació segons el tipus de base de dades no relacionals.
   * 7.5 Utilitza les eines del sistema gestor per a la gestió de la informació emmagatzemada.

## Continguts (orientatius)

1. **Emmagatzematge de la informació**:
   * 1.1. Fitxers (plans, indexats, accés directe, entre d'altres).
   * 1.2. Bases de dades. Conceptes, usos i tipus segons el model de dades, la ubicació de la informació.
   * 1.3. Sistemes gestors de base de dades: funcions, components i tipus.
   * 1.4. Bases de dades centralitzades i bases de dades distribuïdes. Tècniques de fragmentació.
   * 1.5. Legislació sobre protecció de dades.
   * 1.6. Big Data: introducció, anàlisi de dades, intel·ligència de negocis.

2. **Bases de dades relacionals**:
   * 2.1. Model de dades.
   * 2.2. Terminologia del model relacional.
   * 2.3. Tipus de dades.
   * 2.4. Claus primàries.
   * 2.5. Restriccions de validació.
   * 2.6. Índexs. Característiques.
   * 2.7. El valor NULL.
   * 2.8. Claus foranes.
   * 2.9. Vistes.
   * 2.10. Usuaris. Privilegis.
   * 2.11. Llenguatge de descripció de dades (DDL).
   * 2.12. Llenguatge de control de dades (DCL).

3. **Realització de consultes**:
   * 3.1. Projecció, selecció i ordenació de registres.
   * 3.2. Operadors. Operadors de comparació. Operadors lògics.
   * 3.3. Consultes de resum.
   * 3.4. Agrupament de registres.
   * 3.5. Composicions internes.
   * 3.6. Composicions externes.
   * 3.7. Subconsultes.
   * 3.8. Combinació de múltiples seleccions.
   * 3.9. Optimització de consultes.

4. **Tractament de dades**:
   * 4.1. Inserció, supressió i modificació de registres.
   * 4.2. Integritat referencial.
   * 4.3. Subconsultes i composicions en les sentències d’edició.
   * 4.4. Transaccions.
   * 4.5. Polítiques de bloqueig. Concurrència.

5. **Programació de bases de dades**:
   * 5.1. Introducció. Llenguatge de programació.
   * 5.2. Variables del sistema i variables d'usuari.
   * 5.3. Funcions.
   * 5.4. Estructures de control de flux.
   * 5.5. Procediments emmagatzemats. Funcions d'usuari.
   * 5.6. Esdeveniments i disparadors.
   * 5.7. Excepcions.
   * 5.8. Cursors.

6. **Interpretació de Diagrames Entitat/Relació**:
   * 6.1. El model E/R. Entitats i relacions. Cardinalitats. Debilitat.
   * 6.2. El model E/R ampliat. Generalització i especialització. Agregació.
   * 6.3. Pas del diagrama E/R al model relacional.
   * 6.4. Restriccions semàntiques del model relacional.
   * 6.5. Normalització de models relacionals.

7. **Ús de bases de dades no relacionals**:
   * 7.1. Característiques de les bases de dades no relacionals.
   * 7.2. Tipus de bases de dades no relacionals.
   * 7.3. Elements de les bases de dades no relacionals.
   * 7.4. Sistemes gestors de bases de dades no relacionals.
   * 7.5. Eines dels sistemes gestors de bases de dades no relacionals per a la gestió de la informació emmagatzemada.